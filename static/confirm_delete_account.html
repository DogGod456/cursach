<!DOCTYPE html>
<html lang="ru">
<head><meta charset="UTF-8"><title>Удалить аккаунт</title></head>
<body>
<h1>Удалить аккаунт?</h1>
<button id="yesBtn">ДА</button>
<button id="noBtn">НЕТ</button>

<script>
    const token = localStorage.getItem('token');
    if (!token) window.location.href = '/login.html';

    document.getElementById('yesBtn').onclick = async () => {
        try {
            const response = await fetch('/api/users/me', {
                method: 'DELETE',
                headers: { 'Authorization': 'Bearer ' + token }
            });

            if (!response.ok) {
                const error = await response.text();
                throw new Error(error || 'Ошибка удаления');
            }

            localStorage.removeItem('token');
            window.location.href = '/login.html';
        } catch (error) {
            alert(error.message);
        }
    };

    document.getElementById('noBtn').onclick = () => {
        window.location.href = '/contacts.html';
    };
</script>
</body>
</html>